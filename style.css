/* ========== Design Tokens ========== */
:root{
  --near-black-blue:#0F141E;
  --stormy-steel:#37475D;
  --weathered-leather:#8B7E74;
  --bone:#C9B99A;
  --frosted-white:#EDEDE0;

  --site-width: min(1200px, 92vw);
  --container-pad: clamp(12px, 2vw, 24px);

  --bg: var(--stormy-steel);
  --surface: var(--near-black-blue);
  --text: var(--frosted-white);
  --muted: var(--bone);
  --brand: var(--stormy-steel);
  --brand-2: var(--weathered-leather);
  --accent: var(--bone);
  --ring: var(--bone);

  --card: var(--frosted-white);
  --card-strong: #E6E6D8;

  --radius:16px; --shadow:0 10px 30px rgba(0,0,0,.35);
  --space-1:.25rem; --space-2:.5rem; --space-3:.75rem; --space-4:1rem; --space-5:1.5rem; --space-6:2rem; --space-7:3rem; --space-8:4.5rem;
}

/* ========== Base ========== */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  color:var(--text);
  background: var(--surface);
  line-height:1.6;
  position: relative;
}
body::before{
  content:"";
  position:fixed;
  top:0; bottom:0; left:50%;
  transform:translateX(-50%);
  width: calc(var(--site-width) + (2 * var(--container-pad)));
  max-width: 100%;
  background: var(--bg);
  z-index: 0;
}
.skip-link{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}
.skip-link:focus{left:1rem;top:1rem;width:auto;height:auto;background:#000;color:#fff;padding:.5rem .75rem;border-radius:8px;z-index:1000}

/* Containers & Sections */
.container{width:var(--site-width);margin-inline:auto; padding:0 var(--container-pad); position: relative; z-index: 1;}
.section{padding:var(--space-8) 0}
.section--tint{background:transparent;}
.section-head{margin-bottom:var(--space-6)}
.section-head h2{margin:0 0 .25rem}
.muted{color:var(--muted)}

/* ===== TOP BAR ===== */
.topbar{
  position:sticky;top:0;z-index:60;
  background: var(--surface);
  color: var(--frosted-white);
  border-bottom:1px solid rgba(0,0,0,.3);
  font-weight:700;font-size:.95rem
}
.topbar__inner{
  display:flex;align-items:center;justify-content:flex-end;
  padding:.4rem var(--container-pad);
  width:var(--site-width);margin-inline:auto
}
.topbar__links{display:flex;align-items:center;gap:.6rem}
.topbar .socials{display:flex;gap:.25rem}
.topbar .icon{
  display:grid;place-items:center;width:28px;height:28px;border-radius:8px;
  color: var(--near-black-blue);
  background: rgba(237,237,224,.7);
  border:1px solid rgba(0,0,0,.15);
  text-decoration:none;font-size:.8rem;line-height:1
}
.topbar .icon:hover{background:rgba(237,237,224,.9)}

/* Header / Nav */
.site-header{
  position:sticky;top:36px;z-index:50;
  background: var(--surface);
  border-bottom:1px solid rgba(255,255,255,.06)
}
.nav-wrap{
  display:flex;align-items:center;justify-content:space-between;
  padding:.7rem var(--container-pad);
  width:var(--site-width);margin-inline:auto
}
.brand{display:flex;align-items:center;gap:.75rem;text-decoration:none;color:inherit}
.logo{
  width:36px;height:36px;border-radius:10px;
  background: url('./media/NewLogoTree.png') no-repeat center/contain;
  background-color: transparent;
  box-shadow:var(--shadow);
  color: transparent; font-size:0; line-height:0;
}
.wordmark{font-family:inherit;font-weight:800;font-size:1.15rem;letter-spacing:.2px}
.site-nav ul{list-style:none;display:flex;gap:.9rem;margin:0;padding:0;align-items:center}
.site-nav a{text-decoration:none;color:var(--text);opacity:.9;padding:.35rem .5rem;border-radius:10px}
.site-nav a:hover,.site-nav a:focus{opacity:1;background:rgba(237,237,224,.10);outline:none}
.nav-toggle{display:none;background:transparent;border:none;cursor:pointer}
.nav-toggle .bar{display:block;width:22px;height:2px;background:var(--text);margin:5px 0;border-radius:2px}
@media (max-width:820px){
  .site-header{top:36px}
  .nav-toggle{display:block}
  .site-nav{position:fixed;inset:calc(36px + 60px) 1rem auto 1rem;padding:.75rem;background:rgba(15,20,30,.93);border:1px solid rgba(255,255,255,.07);border-radius:14px;display:none}
  .site-nav.open{display:block}
  .site-nav ul{flex-direction:column;align-items:stretch}
}

/* Hero */
.hero{position:relative;padding:clamp(1.25rem,4vw,2.25rem) 0 clamp(1rem,3vw,2rem);}
.hero__inner{text-align:center}
.grad{color:var(--text)}

/* HERO BANNER — constrained to the same width as the main body */
.hero-banner{
  display:block;
  width: calc(var(--site-width) + (2 * var(--container-pad))); /* match the center strip */
  max-width: 100%;
  height:clamp(300px,38vw,560px);
  background: transparent url('./media/webBanner.png') no-repeat center/cover;
  margin:0 auto var(--space-8);
  filter: drop-shadow(0 6px 20px rgba(0,0,0,.25));
}
@media (max-width:640px){
  .hero-banner{height:clamp(180px,50vw,280px)}
}

/* Headline below banner */
.page-hero{
  padding:clamp(1.6rem,4.2vw,2.6rem) 0 1rem;
  text-align:center;
  position:relative;
  z-index:1;
}
.page-hero h1{margin:0;font-weight:800;font-size:clamp(1.8rem,4.5vw,2.6rem)}
/* diary-intro removed from HTML */

/* Buttons */
.btn{
  display:inline-block;border-radius:12px;padding:.8rem 1rem;font-weight:700;
  background: var(--near-black-blue);
  color: var(--frosted-white);
  text-decoration:none; box-shadow:0 8px 24px rgba(0,0,0,.25)
}
.btn:hover,.btn:focus{transform:translateY(-1px);box-shadow:0 10px 28px rgba(0,0,0,.3)}
.btn--ghost{background:transparent;color:var(--text);border:1px solid var(--brand-2);box-shadow:none}
.btn--small{padding:.55rem .8rem;font-size:.9rem}

/* Cards & Layouts */
.layout-split{display:grid;gap:var(--space-6);grid-template-columns:1.2fr .8fr}
@media (max-width:900px){.layout-split{grid-template-columns:1fr}}
.card{
  background:var(--card);
  border:1px solid rgba(15,20,30,.12);
  border-radius:var(--radius);
  padding:var(--space-6);
  box-shadow:var(--shadow);
  color: var(--near-black-blue);
}
.card--accent{background:var(--card-strong)}
.card h2,.card h3{margin-top:0}

/* unify grid card heights and bottom alignment */
.grid.cards > .card{display:flex;flex-direction:column;}
.card__body{padding:var(--space-5); display:flex; flex-direction:column; flex:1;}
.card .muted{color:var(--near-black-blue);opacity:.85}
.card__actions{
  display:flex; gap:.75rem; align-items:center; justify-content:center;
  margin-top:auto; padding-top:.75rem;
}
.card__actions .link{display:none}
.card__actions .btn{min-width:150px;text-align:center}

/* list */
.checks{margin:var(--space-4) 0 0;padding:0;list-style:none}
.checks li{margin-bottom:.4rem;padding-left:1.4rem;position:relative}
.checks li::before{
  content:"";position:absolute;left:0;top:.45rem;width:.8rem;height:.8rem;border-radius:50%;
  background: var(--brand-2); box-shadow:0 0 0 2px rgba(0,0,0,.06)
}

/* cards grid */
.grid.cards{display:grid;gap:var(--space-6);grid-template-columns:repeat(3,1fr)}
@media (max-width:1040px){.grid.cards{grid-template-columns:repeat(2,1fr)}}
@media (max-width:720px){.grid.cards{grid-template-columns:1fr}}

/* thumbnails */
.card--glass{background: var(--card);border:1px solid rgba(15,20,30,.12);overflow:hidden}
.thumb{aspect-ratio:1200 / 630;display:block;border-bottom:1px solid rgba(15,20,30,.12)}
.thumb img,.thumb svg{width:100%;height:100%;object-fit:cover;display:block}

/* YouTube play label */
.yt-tile{position:relative;overflow:hidden;border-bottom:1px solid rgba(15,20,30,.12)}
.yt-thumb{width:100%;height:100%;object-fit:cover;display:block;aspect-ratio:1200/630;filter:saturate(1.05)}
.yt-play{
  position:absolute;inset:auto 0 12px 12px;padding:.5rem .7rem;border-radius:10px;
  border:1px solid rgba(15,20,30,.25);background: rgba(15,20,30,.6); color:#fff; font-weight:800; cursor:pointer
}

/* ===== Audio faux visualizer — explicit height + fill ===== */
.audio-vis{
  position:relative;
  height:180px;
  margin-inline: calc(-1 * var(--space-6));
  border-bottom:1px solid rgba(15,20,30,.12);
  background: rgba(55,71,93,.18);
}
.card--audio .thumb{aspect-ratio:auto;}     /* override generic ratio */

.faux-vis{position:absolute; inset:0;}
.faux-vis .bars{
  height:100%;
  display:grid;grid-auto-flow:column;grid-auto-columns:1fr;align-items:end;gap:8px;
  padding:0;border-radius:12px;background: rgba(55,71,93,.18);
}
.faux-vis .bars span{
  display:block;height:18%;border-radius:6px;background: var(--stormy-steel);
  opacity:.9; transform-origin:bottom;
  animation:faux-bounce var(--dur,1.2s) ease-in-out infinite; animation-delay:var(--delay,0s);
}
@keyframes faux-bounce{0%,100%{transform:scaleY(.15)}50%{transform:scaleY(var(--peak,.95))}}
.faux-vis .bars span:nth-child(3n){--dur:1.0s;--peak:.85}
.faux-vis .bars span:nth-child(4n){--dur:1.4s;--peak:.95}
.faux-vis .bars span:nth-child(5n){--dur:1.25s;--peak:.75}
.faux-vis .bars span:nth-child(6n){--dur:1.6s;--peak:1.00}
.faux-vis .bars span:nth-child(2n){--delay:.15s}
.faux-vis .bars span:nth-child(7n){--delay:.3s}
.faux-vis .bars span:nth-child(8n){--delay:.45s}

/* Focus */
a:focus,button:focus{outline:2px solid var(--ring);outline-offset:2px}

/* ===== Footer ===== */
.site-footer{
  border-top:1px solid rgba(255,255,255,.08);
  background: rgba(15,20,30,.7);
  /* ensure footer content is above background layers & always visible */
  position: relative;
  z-index: 5;
  color: var(--frosted-white);
}
.site-footer *{ color: var(--frosted-white); } /* harden color against overrides */

.ftr{
  display:flex;align-items:center;justify-content:space-between;gap:1rem;
  padding:1rem var(--container-pad);
  width:var(--site-width);margin-inline:auto;
  min-height:48px; /* guarantee it has height */
}
.ftr p{margin:0}
.copyright{ display:block; font-weight:600; }

.ftr nav a{color:var(--frosted-white);opacity:.85;text-decoration:none;margin-left:.9rem}
.ftr nav a:hover{opacity:1}
.footer-socials .icon{margin-left:.9rem;color:var(--frosted-white);opacity:.85;text-decoration:none}
.footer-socials .icon:hover{opacity:1}

/* Contact */
.card--contact p,.card--contact a{color:inherit}
.card--contact a:hover{text-decoration:underline}

/* Motion reduce */
@media (prefers-reduced-motion:reduce){
  *{transition-duration:.001ms!important;animation-duration:.001ms!important}
}

/* ===== Diary page ===== */
.entry-list{display:grid;gap:var(--space-6);margin-top:var(--space-6)}
.entry{background:var(--card);border:1px solid rgba(15,20,30,.12);border-radius:var(--radius);padding:var(--space-6);box-shadow:var(--shadow);color: var(--near-black-blue);}
.entry__head{display:flex;justify-content:space-between;align-items:baseline;gap:1rem;margin-bottom:.75rem}
.entry__title{margin:0;font-size:1.35rem}
.entry time{color:var(--brand-2);font-size:.95rem}
.entry__content{position:relative}
.entry__content p{margin:.75rem 0}
.entry__tags{margin-top:.5rem;display:flex;gap:.5rem;flex-wrap:wrap}
.entry__tags .tag{font-size:.8rem;color:#0c1222;font-weight:700;padding:.25rem .5rem;border-radius:999px;background: var(--accent)}
.entry--clamp .entry__content{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:8;overflow:hidden}
.entry--clamp .entry__content::after{
  content:"";position:absolute;left:0;right:0;bottom:0;height:3.5rem;
  background:linear-gradient(to bottom,rgba(15,20,30,0) 0%,rgba(15,20,30,.08) 45%,var(--card) 100%);
  pointer-events:none
}
.entry--clamp.is-open .entry__content{-webkit-line-clamp:unset;overflow:visible}
.entry--clamp.is-open .entry__content::after{display:none}
.entry__toggle{margin-top:.75rem;background:transparent;border:1px solid var(--brand-2);color:var(--near-black-blue);padding:.45rem .7rem;border-radius:10px;font-weight:700;cursor:pointer}

/* ===== Homepage extras ===== */
.yt-tile:focus-visible{outline:2px solid var(--ring);outline-offset:3px}
.yt-embed iframe{width:100%;height:100%;aspect-ratio:1200/630;border:0;display:block}

/* ===== Section-specific tweaks ===== */
.section:has(.grid.cards) .section-head { text-align:center; }

/* ===== Lightbox (art card) ===== */
.lightbox[hidden]{ display:none !important; }
.lightbox{
  position: fixed; inset: 0;
  display: flex; align-items: center; justify-content: center;
  padding: 2rem;
  background: rgba(0,0,0,.75);
  z-index: 1000; /* above sticky header/topbar */
}
.lightbox__img{
  max-width: min(1200px, 90vw);
  max-height: 90vh;
  width: auto; height: auto;
  border-radius: 12px;
  box-shadow: 0 20px 60px rgba(0,0,0,.55);
}
.lightbox__close{
  position: absolute; top: 1rem; right: 1rem;
  width: 44px; height: 44px; border-radius: 50%;
  border: 1px solid rgba(255,255,255,.25);
  background: rgba(0,0,0,.6);
  color: #fff; font-size: 28px; line-height: 42px;
  cursor: pointer;
}

/* Fallback lightbox (script.js creates .lb if needed) */
.lb{
  position: fixed; inset: 0;
  display: flex; align-items: center; justify-content: center;
  padding: 2rem;
  background: rgba(0,0,0,.75);
  z-index: 1000;
}
.lb__img{
  max-width: min(1200px, 90vw);
  max-height: 90vh;
  border-radius: 12px;
  box-shadow: 0 20px 60px rgba(0,0,0,.55);
}
.lb__close{
  position: absolute; top: 1rem; right: 1rem;
  width: 44px; height: 44px; border-radius: 50%;
  border: 1px solid rgba(255,255,255,.25);
  background: rgba(0,0,0,.6);
  color: #fff; font-size: 28px; line-height: 42px;
  cursor: pointer;
}
/* Free Tools hero CTA placement */
.page-hero .cta-row { 
  margin-top: 0.75rem; 
  text-align: center;        /* centers under the intro line */
}
.page-hero .cta-row .btn { 
  display: inline-flex; 
}
/* Diary: center CTA rows outside the hero (e.g., under the entries) */
.cta-row--center { text-align: center; margin-top: 0.75rem; }
.cta-row--center .btn { display: inline-flex; margin: 0 .4rem; }

/* Diary: keep hero intro a comfortable width */
.page-hero .intro--narrow { max-width: 72ch; margin-inline: auto; }

/* --- Mobile fix: stack home cards (override inline 2-col) --- */
@media (max-width: 780px){
  .cards { grid-template-columns: 1fr !important; } /* beats inline style */
}